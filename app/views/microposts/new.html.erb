<% provide(title: "Micropost") %>
<h1>投稿しよう！！</h1>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_with(model: @micropost, local: true) do |f| %>
      <%= render "shared/error_messages", resource: f.object %>

      <%= f.label :title %><br>
      <%= f.text_field :title, class: "form-controll" %><br>

      <span class="image">
        <%= f.file_field :image, accept: "image/jpeg, image/png" %>
      </span>

      <%= f.submit "投稿する", class: "btn btn-primary mt-3" %><br>
    <% end %>
  </div>
</div>

<script type="text/javascript">
  $("#micropost_image").bind("change", function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert("Maximum file size is 5MB. Please choose a smaller file.");
      $("#micropost_image").val("");
    }
  });
</script>
